<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Target Name="UpdateGeneratedFiles" DependsOnTargets="_UpdateGeneratedFiles" Condition="'@(ResourceFile)' != ''">
        <ItemGroup>
            <Compile Include="$(IntermediateOutputPath)GeneratedFile.g.cs" />
            <!-- see https://mhut.ch/journal/2016/04/19/msbuild_code_generation_vs2015
    <FileWrites Include="$(IntermediateOutputPath)GeneratedFile.g.cs" />
    -->
        </ItemGroup>
    </Target>
    <Target Name="_UpdateGeneratedFiles" Inputs="$(MSBuildProjectFile);@(ResourceFile)" Outputs="$(IntermediateOutputPath)GeneratedFile.g.cs">
        <FileGenerationTask Inputs="@(ResourceFile)" Output="$(IntermediateOutputPath)GeneratedFile.g.cs"/>
    </Target>
    <PropertyGroup>
        <CoreCompileDependsOn>UpdateGeneratedFiles;$(CoreCompileDependsOn)</CoreCompileDependsOn>
    </PropertyGroup>
</Project>